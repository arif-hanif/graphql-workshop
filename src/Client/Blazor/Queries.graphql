query initialData {
  me {
    ...person
  }
  people(where: { email_not: "foo@bar.com" }) {
    nodes {
      ...person
    }
  }
}

fragment person on Person {
  id
  name
  email
  imageUri
  isOnline
  lastSeen
}

query chat($personId: Uuid!) {
  me {
    messages(where: { recipientId: $personId, OR: { senderId: $personId } }) {
      nodes {
        ...message
      }
    }
  }
}

fragment message on Message {
  direction
  id
  recipient {
    ...participant
  }
  sender {
    ...participant
  }
  sent
  text
}

fragment participant on Person {
  id
  name
  isOnline
}
