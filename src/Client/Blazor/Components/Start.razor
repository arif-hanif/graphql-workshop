@inject IChatClient ChatClient

@if (signIn?.Data?.Login?.Me == null)
{
  if (showSignUpForm)
  {
    <SignUpForm ClickSignIn="OnClickSignIn" HandleSignUp="@(async (model) => { await OnHandleSignUp(model); })" />
  }
  else
  {
    <SignInForm ClickSignUp="OnClickSignUp" HandleSignIn="@(async (model) => { await OnHandleSignIn(model); })" />
  }
}
else
{
  <Main User="@signIn?.Data?.Login?.Me" />
}

@code {
    private bool showSignUpForm;
    private IOperationResult<ISignIn>? signIn;
    private IOperationResult<ISignUp>? signUp;

    private void OnClickSignIn()
    {
        showSignUpForm = false;
    }

    private void OnClickSignUp()
    {
        showSignUpForm = true;
    }

    private async Task OnHandleSignIn(SignInModel model)
    {
        signIn = await ChatClient.SignInAsync(new LoginInput
        {
            Email = model.Email,
            Password = model.Password
        });
    }

    private async Task OnHandleSignUp(SignUpModel model)
    {
        signUp = await ChatClient.SignUpAsync(new CreateUserInput
        {
            Email = model.Email,
            Name = model.Name,
            Password = model.Password
        });
    }
}