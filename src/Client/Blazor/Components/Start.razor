@inject IChatClient ChatClient

@if (signin?.Data?.Login?.Me == null)
{
  if (showSignUpForm)
  {
    <SignUpForm ClickBack="OnClickBack" HandleSignup="@(async (model) => { await OnHandleSignUp(model); })" />
  }
  else
  {
    <SignInForm ClickSignup="OnClickSignUp" HandleSignin="@(async (model) => { await OnHandleSignIn(model); })" />
  }
}
else
{
  <Main User="@signin?.Data?.Login?.Me" />
}

@code {
    private bool showSignUpForm;
    private IOperationResult<ISignin>? signin;
    private IOperationResult<ISignup>? signup;

    private void OnClickBack()
    {
        showSignUpForm = false;
    }

    private void OnClickSignUp()
    {
        showSignUpForm = true;
    }

    private async Task OnHandleSignIn(SignInModel model)
    {
        signin = await ChatClient.SigninAsync(new LoginInput
        {
            Email = model.Email,
            Password = model.Password
        });
    }

    private async Task OnHandleSignUp(SignUpModel model)
    {
        signup = await ChatClient.SignupAsync(new CreateUserInput
        {
            Email = model.Email,
            Name = model.Name,
            Password = model.Password
        });
    }
}