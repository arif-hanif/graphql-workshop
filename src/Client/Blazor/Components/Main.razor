@inject IChatClient ChatClient

<PeopleList
  IsLoading="@isLoadingInitialData"
  People="@initialData?.Data?.People"
/>
<MessageList
  IsLoading="@isLoadingChat"
  Messages="@chat?.Data?.Me?.Messages"
  User="@initialData?.Data?.Me"
/>

@code {
    private bool isLoadingInitialData = true;
    private IOperationResult<IInitialData>? initialData;
    private bool isLoadingChat = true;
    private IOperationResult<IChat>? chat;

    protected override async Task OnInitializedAsync()
    {
        initialData = await ChatClient.InitialDataAsync();
        isLoadingInitialData = false;
        StateHasChanged();

        var user = initialData?.Data?.Me;

        if (user != null)
        {
            chat = await ChatClient.ChatAsync(user.Id);
        }

        isLoadingChat = false;
        StateHasChanged();
    }
}